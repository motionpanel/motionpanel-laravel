import{c as u,r as x,j as e,J as m}from"./app-B6RDJg5p.js";import{u as h,a as j,R as f,b as d,S as b,E as p,L as v,c as g,J as y,d as w,g as J}from"./status-view-CBGKan0S.js";import{P as N,c as z}from"./page-header-uzg5tLCo.js";const L=u("/jobs/")({component:P});function P(){var r,i,o,l;const[a,c]=x.useState(null),s=h({queryKey:["jobs"],queryFn:J}),n=j({mutationFn:w,onSuccess:()=>{s.refetch(),m("Job deleted successfully")}});return e.jsx("div",{className:"w-full h-full flex flex-col",children:e.jsxs(f,{direction:"horizontal",children:[e.jsxs(d,{children:[e.jsxs(N,{children:[e.jsx("h1",{className:"font-medium flex-1",children:"Jobs"}),e.jsx(b,{})]}),e.jsxs("div",{className:"flex flex-col space-y-2 p-4",children:[s.isLoading&&e.jsx("div",{children:"Loading..."}),s.isError&&e.jsxs("div",{children:["Error: ",s.error.message]}),s.isSuccess&&((i=(r=s.data)==null?void 0:r.data)==null?void 0:i.length)===0&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(p,{children:e.jsx("div",{className:"text-lg font-extralight",children:"No jobs available"})})}),s.isSuccess&&((l=(o=s.data)==null?void 0:o.data)==null?void 0:l.map(t=>e.jsx("div",{className:"rounded-sm",children:e.jsx(v,{className:z((a==null?void 0:a.id)===t.id?"bg-zinc-100":void 0,"border","border-zinc-200"),job:t,showAttempts:!0,showCreatedAt:!0,showDeleteButton:!t.reserved_at,onDelete:()=>n.mutate(t.id),description:t.reserved_at?"Possibly in progress or will be retried":void 0,onItemClick:()=>c(t)})},t.id)))]})]}),e.jsx(g,{}),e.jsx(d,{children:a&&e.jsx(y,{job:a,showCreatedAt:!0,showAttempts:!0,showDeleteButton:!a.reserved_at})})]})})}export{L as Route};
