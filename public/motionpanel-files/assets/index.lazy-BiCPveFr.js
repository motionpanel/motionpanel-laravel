import{c as x,r as f,j as e,J as c}from"./app-B6RDJg5p.js";import{u as j,a as u,R as b,b as m,S as y,E as J,L as p,c as g,J as F,e as R,r as w,f as v}from"./status-view-CBGKan0S.js";import{P as S,c as z}from"./page-header-uzg5tLCo.js";const B=x("/jobs/failed/")({component:E});function E(){var o,l,n,d;const[t,h]=f.useState(null),s=j({queryKey:["failed-jobs"],queryFn:v}),r=u({mutationFn:R,onSuccess:()=>{s.refetch(),c("Job deleted successfully")}}),i=u({mutationFn:w,onSuccess:()=>{s.refetch(),c("Job retried successfully")}});return e.jsx("div",{className:"w-full h-full",children:e.jsxs(b,{direction:"horizontal",children:[e.jsxs(m,{children:[e.jsxs(S,{children:[e.jsx("h1",{className:"font-medium flex-1",children:"Failed Jobs"}),e.jsx(y,{})]}),e.jsxs("div",{className:"flex flex-col space-y-2 p-4",children:[s.isLoading&&e.jsx("div",{children:"Loading..."}),s.isError&&e.jsxs("div",{children:["Error: ",s.error.message]}),s.isSuccess&&((l=(o=s.data)==null?void 0:o.data)==null?void 0:l.length)===0&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(J,{children:e.jsx("div",{className:"text-lg font-extralight",children:"Congratulations, no failed jobs!"})})}),s.isSuccess&&((d=(n=s.data)==null?void 0:n.data)==null?void 0:d.map(a=>e.jsx(p,{job:a,className:z((t==null?void 0:t.id)===a.id?"bg-zinc-100":void 0,"border","border-zinc-200","rounded-sm"),onDelete:()=>r.mutate(a.id),onRetry:()=>i.mutate(a.id),showRetryButton:!0,showDeleteButton:!0,showFailedAt:!0,onItemClick:()=>h(a)},a.id)))]})]}),e.jsx(g,{}),e.jsx(m,{children:t&&e.jsx(F,{job:t,showRetryButton:!0,showFailedAt:!0,showDeleteButton:!t.reserved_at,onRetry:()=>i.mutate(t.id),onDelete:()=>r.mutate(t.id)})})]})})}export{B as Route};
